var SPRITE_GROSSINI_TAG = 1;
var SPRITE_TAMARA_TAG = 2;
var SPRITE_KATHIA_TAG = 3;

var Issue1008Test = cc.LayerGradient.extend({
    init : function(){
        this._super(cc.c4b(0,0,0,255), cc.c4b(98,99,117,255) );

        this._grossini = cc.Sprite.create(res.grossini_png);
        this.addChild(this._grossini, SPRITE_GROSSINI_TAG);
        winSize = cc.Director.getInstance().getWinSize();

        // sprite 1
        this._grossini.setPosition(428, 279);

        // 3 and only 3 control points should be used for Bezier actions.
        var controlPoints1 = [ cc.p(428, 279), cc.p(100, 100), cc.p(100, 100)];
        var controlPoints2 = [ cc.p(100, 100), cc.p(428, 279), cc.p(428, 279)];

        var bz1 = cc.BezierTo.create(1.5, controlPoints1);
        var bz2 = cc.BezierTo.create(1.5, controlPoints2);
        var trace = cc.CallFunc.create(this.onTrace, this);
        var delay = cc.DelayTime.create(0.25);

        var rep = cc.RepeatForever.create(cc.Sequence.create(bz1, bz2, trace,delay));

        this._grossini.runAction(rep);
        //this._grossini.runAction(cc.Sequence.create(bz1, bz2, trace,delay));
        return true;
    },
    onTrace:function (sender) {
        var pos = sender.getPosition();
        logTest("Position x: " + pos.x + ' y:' + pos.y);
        if (Math.round(pos.x) != 428 || Math.round(pos.y) != 279)
            logTest("Error: Issue 1008 is still open");
    }
});
Issue1008Test.create = function(args){
    var layer = new Issue1008Test();
    layer.init();
    return layer;
}