var TMXOrthoTest4 = cc.Layer.extend({
    init : function(){
        this._super();

        var map = cc.TMXTiledMap.create(res.orthogonal_test4_tmx);
        this.addChild(map, 0, 1);

        map.setAnchorPoint(0, 0);

        var layer = map.getLayer("Layer 0");
        var s = layer.getLayerSize();

        var sprite;
        sprite = layer.getTileAt(cc.p(0, 0));
        sprite.setScale(2);

        sprite = layer.getTileAt(cc.p(s.width - 1, 0));
        sprite.setScale(2);

        sprite = layer.getTileAt(cc.p(0, s.height - 1));
        sprite.setScale(2);

        sprite = layer.getTileAt(cc.p(s.width - 1, s.height - 1));
        sprite.setScale(2);

        this.scheduleOnce(this.onRemoveSprite, 2);

        return true;
    },

    onRemoveSprite:function (dt) {
        var map = this.getChildByTag(1);

        var layer = map.getLayer("Layer 0");
        var layerSize = layer.getLayerSize();

        var sprite = layer.getTileAt(cc.p(layerSize.width - 1, 0));
        layer.removeChild(sprite, true);

        this.testLayerSize = layerSize;
    }
});

TMXOrthoTest4.create = function(args){
    var layer = new TMXOrthoTest4();
    return layer.init() ? layer : null;
};
