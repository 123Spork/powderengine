var SPRITE_GROSSINI_TAG = 1;
var SPRITE_TAMARA_TAG = 2;
var SPRITE_KATHIA_TAG = 3;

var ActionBezierTest = cc.LayerGradient.extend({
    init : function(){
        this._super(cc.c4b(0,0,0,255), cc.c4b(98,99,117,255) );

        this._grossini = cc.Sprite.create(res.grossini_png);
        this._tamara = cc.Sprite.create(res.grossinis_sister1_png);
        this._kathia = cc.Sprite.create(res.grossinis_sister2_png);
        this.addChild(this._grossini, SPRITE_GROSSINI_TAG);
        this.addChild(this._tamara, SPRITE_TAMARA_TAG);
        this.addChild(this._kathia, SPRITE_KATHIA_TAG);
        winSize = cc.Director.getInstance().getWinSize();
        this._grossini.setPosition(winSize.width / 2, winSize.height / 2);
        this._tamara.setPosition(winSize.width / 4, winSize.height / 2);
        this._kathia.setPosition(3 * winSize.width / 4, winSize.height / 2);

        // sprite 1
        var delay = cc.DelayTime.create(0.25);

        // 3 and only 3 control points should be used for Bezier actions.
        var controlPoints = [ cc.p(0, 374),
            cc.p(300, -374),
            cc.p(300, 100) ];

        var bezierForward = cc.BezierBy.create(2, controlPoints);
        var rep = cc.RepeatForever.create(
            cc.Sequence.create(
                bezierForward, delay, bezierForward.reverse(), delay.clone()
            ));

        // sprite 2
        this._tamara.setPosition(80, 160);

        // 3 and only 3 control points should be used for Bezier actions.
        var controlPoints2 = [ cc.p(100, winSize.height / 2),
            cc.p(200, -winSize.height / 2),
            cc.p(240, 160) ];
        var bezierTo1 = cc.BezierTo.create(2, controlPoints2);

        // // sprite 3
        var controlPoints3 = controlPoints2.slice();
        this._kathia.setPosition(400, 160);
        var bezierTo2 = cc.BezierTo.create(2, controlPoints3);

        this._grossini.runAction(rep);
        this._tamara.runAction(bezierTo1);
        this._kathia.runAction(bezierTo2);

        return true;
    }
});
ActionBezierTest.create = function(args){
    var layer = new ActionBezierTest();
    layer.init();
    return layer;
}