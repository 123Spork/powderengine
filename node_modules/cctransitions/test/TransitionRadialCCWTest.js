var TransitionBase = cc.Layer.extend({
    init:function () {
        this._super();

        var x, y;
        var size = cc.Director.getInstance().getWinSize();
        x = size.width;
        y = size.height;

        var bg1 = cc.Sprite.create(this.backgroundImage);
        bg1.setPosition(size.width / 2, size.height / 2);
        bg1.setScale(1.7);
        this.addChild(bg1);

        var title = cc.LabelTTF.create("TransitionRadialCCW", "Thonburi", 32);
        this.addChild(title);
        title.setColor(cc.c3b(255, 32, 32));
        title.setPosition(x / 2, y - 100);

        var label = cc.LabelTTF.create(this.sceneName, "Marker Felt", 38);
        label.setColor(cc.c3b(16, 16, 255));
        label.setPosition(x / 2, y / 2);
        this.addChild(label);

        this.scheduleOnce(this.step, 3.0);
        return true;
    },

    step:function (dt) {
        //next layer
        var nextScene = cc.Scene.create();
        var layer = this.createNextScene();
        layer.init();
        nextScene.addChild(layer);

        var aTransition = cc.TransitionProgressRadialCCW.create(1.2, layer);
        if (aTransition)
            cc.Director.getInstance().replaceScene(aTransition);
    },

    onEnter:function () {
        this._super();
        logTest(this.sceneName + " onEnter");
    },
    onEnterTransitionDidFinish:function () {
        this._super();
        logTest(this.sceneName + " onEnterTransitionDidFinish");
    },

    onExitTransitionDidStart:function () {
        this._super();
        logTest(this.sceneName + " onExitTransitionDidStart");
    },

    onExit:function () {
        this._super();
        logTest(this.sceneName + " onExit");
    }
});

var TransitionRadialCCWTest = TransitionBase.extend({
    backgroundImage:res.background1_png,
    sceneName:"Scene 1",
    createNextScene:function() {
        return new TransitionRadialCCWTest2();
    }
});

var TransitionRadialCCWTest2 = TransitionBase.extend({
    backgroundImage:res.background2_png,
    sceneName:"Scene 2",
    createNextScene:function() {
        return new TransitionRadialCCWTest();
    }
});

TransitionRadialCCWTest.create = function(args){
    var layer = new TransitionRadialCCWTest();
    return layer.init() ? layer : null;
};
