var TMXOrthoZorder = cc.Layer.extend({
    tamara:null,
    init : function(){
        this._super();

        var map = cc.TMXTiledMap.create(res.orthogonal_test_vertexz_tmx);
        this.addChild(map, 0, 1);

        this.tamara = cc.Sprite.create(res.grossinis_sister1_png);
        map.addChild(this.tamara, map.getChildren().length, 1);
        this.tamara.setAnchorPoint(0.5, 0);
        this.tamara.setPosition(250, 150);
        this.schedule(this.repositionSprite);
        return true;
    },
    repositionSprite:function (dt) {
        var p = this.tamara.getPosition();
        var map = this.getChildByTag(1);

        // -10: customization for this particular sample
        var newZ = 4 - ((p.y - 10) / 81);
        newZ = Math.max(newZ, 0);

        map.reorderChild(this.tamara, newZ);
    }
});

TMXOrthoZorder.create = function(args){
    var layer = new TMXOrthoZorder();
    return layer.init() ? layer : null;
};
