var SPRITE_GROSSINI_TAG = 1;
var SPRITE_TAMARA_TAG = 2;
var SPRITE_KATHIA_TAG = 3;

var ActionAnimateTest = cc.LayerGradient.extend({
    init : function(){
        this._super(cc.c4b(0,0,0,255), cc.c4b(98,99,117,255) );

        this._grossini = cc.Sprite.create(res.grossini_png);
        this._tamara = cc.Sprite.create(res.grossinis_sister1_png);
        this._kathia = cc.Sprite.create(res.grossinis_sister2_png);
        this.addChild(this._grossini, SPRITE_GROSSINI_TAG);
        this.addChild(this._tamara, SPRITE_TAMARA_TAG);
        this.addChild(this._kathia, SPRITE_KATHIA_TAG);
        winSize = cc.Director.getInstance().getWinSize();
        this._grossini.setPosition(winSize.width / 2, winSize.height / 2);
        this._tamara.setPosition(winSize.width / 4, winSize.height / 2);
        this._kathia.setPosition(3 * winSize.width / 4, winSize.height / 2);

        //
        // Manual animation
        //
        var animation = cc.Animation.create();
        for (var i = 1; i < 15; i++) {
            var frameName = res.grossini_dance_1_png.replace(/[\d]+/g, i);
            animation.addSpriteFrameWithFile(frameName);
        }
        animation.setDelayPerUnit(2.8 / 14);
        animation.setRestoreOriginalFrame(true);

        var action = cc.Animate.create(animation);
        this._grossini.runAction(cc.Sequence.create(action, action.reverse()));

        //
        // File animation
        //
        // With 2 loops and reverse
        var animCache = cc.AnimationCache.getInstance();

        animCache.addAnimations(res.animations_2_plist);
        var animation2 = animCache.getAnimation("dance_1");

        var action2 = cc.Animate.create(animation2);
        this._tamara.runAction(cc.Sequence.create(action2, action2.reverse()));

        //
        // File animation
        //
        // with 4 loops
        var animation3 = animation2.clone();
        animation3.setLoops(4);

        var action3 = cc.Animate.create(animation3);
        this._kathia.runAction(action3);

        return true;
    }
});
ActionAnimateTest.create = function(args){
    var layer = new ActionAnimateTest();
    layer.init();
    return layer;
}