/**
 * Created by Huabin LING on 12/30/13.
 */

var TAG_LABEL_SPRITE1 = 1;
var TAG_LABEL_SPRITE12 = 12;

var LabelAtlasTest = cc.Layer.extend({
    time:null,

    ctor:function () {
        this._super();

        var s = cc.Director.getInstance().getWinSize();
        var font = res.tuffy_bold_italic_charmap_png;
        var title = cc.LabelTTF.create("Opacity + Color should work at the same time", "Arial", 23);
        this.addChild(title);
        title.setPosition(s.width / 2, s.height - 80);

        var label1 = cc.LabelAtlas.create("123 Test", font, 48, 64, ' ');
        this.addChild(label1, 0, TAG_LABEL_SPRITE1);
        label1.setPosition(10, 100);
        label1.setOpacity(200);

        var label2 = cc.LabelAtlas.create("0123456789", font, 48, 64, ' ');
        this.addChild(label2, 0, TAG_LABEL_SPRITE12);
        label2.setPosition(10, 200);
        label2.setColor(cc.c3b(255, 0, 0));
        label2.setOpacity(155);

        this.time = 0;
        this.schedule(this.step);
    },

    step:function (dt) {
        this.time += dt;
        var string1 = this.time.toFixed(2) + " Test";
        var label1 = this.getChildByTag(TAG_LABEL_SPRITE1);
        label1.setString(string1);

        var label2 = this.getChildByTag(TAG_LABEL_SPRITE12);
        var string2 = parseInt(this.time, 10).toString();
        label2.setString(string2);
    }
});

LabelAtlasTest.create = function(args){
    var layer = new LabelAtlasTest();
    return layer;
}