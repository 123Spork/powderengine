var TMXIsoObjectsTest = cc.Layer.extend({
    init : function(){
        this._super();

        var map = cc.TMXTiledMap.create(res.iso_test_objectgroup_tmx);
        this.addChild(map, 0, 1);

        var group = map.getObjectGroup("Object Group 1");
        var array = group.getObjects();
        var dict;
        for (var i = 0, len = array.length; i < len; i++) {
            dict = array[i];
            if (!dict)
                break;
            for (var k in dict) {
                logTest(k + ' = ' + dict[k]);
            }
        }

        //Automation parameters
        this.testObjects = array;
        this.setAnchorPoint(0, 0);

        return true;
    },
    draw:function (ctx) {
        var map = this.getChildByTag(1);
        var group = map.getObjectGroup("Object Group 1");
        var objects = group.getObjects();
        var dict;

        for (var i = 0, len = objects.length; i < len; i++) {
            dict = objects[i];
            if (!dict)
                break;

            var x = dict["x"];
            var y = dict["y"];
            var width = dict["width"];
            var height = dict["height"];

            cc.renderContext.lineWidth = 3;
            cc.renderContext.strokeStyle = "#ffffff";

            cc.drawingUtil.drawLine(cc.p(x, y), cc.p(x + width, y));
            cc.drawingUtil.drawLine(cc.p(x + width, y), cc.p(x + width, y + height));
            cc.drawingUtil.drawLine(cc.p(x + width, y + height), cc.p(x, y + height));
            cc.drawingUtil.drawLine(cc.p(x, y + height), cc.p(x, y));

            cc.renderContext.lineWidth = 1;
        }
    },
    testObjects:null
});

TMXIsoObjectsTest.create = function(args){
    var layer = new TMXIsoObjectsTest();
    return layer.init() ? layer : null;
};
